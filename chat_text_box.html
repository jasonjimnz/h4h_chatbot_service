<style>
    #h4h_eladata_chatbox{
        position: fixed;
        bottom: 10px;
        right: 10px;
        width: 25vw;
        height: 50vh;
        border: 1px solid black;
        border-radius: 15px;
    }
    #h4h_eladata_chatbox div.h4h_header{
        text-align: center;
        height: 5vh;
        border-bottom: 1px solid black;
    }

    #h4h_eladata_chatbox div.h4h_form{
        height: 5vh;
        padding: 0 10px;
        border-top: 1px solid black;
        padding-top: 15px;
    }

    #h4h_eladata_chatbox div.h4h_messages{
            height: 28vh;
            max-height: 28vh;
            padding: 20px 10px;
            overflow-y: scroll;
    }

    #h4h_eladata_chatbox div.h4h_form input{
        width: 70%;
        padding: 8px;
        font-size: 1em;
        border-radius: 10px;
    }
    #h4h_eladata_chatbox div.h4h_form button{
        width: 25%;
        padding: 8px;
        font-size: 1em;
        border-radius: 10px;
    }
    #h4h_eladata_chatbox div.h4h_messages div{
        margin-top: 10px;
        padding: 5px;
        width: 80%;
        border: 1px solid black;
        border-radius: 10px;
        background-color: #d3ecb6;
    }
    #h4h_eladata_chatbox div.h4h_messages div.h4h_message_user{
        position: relative;
        left: 15%;
        background-color: #ece9bb;
    }
</style>
<div id="h4h_eladata_chatbox">
    <div class="h4h_header">
        <h3>Eladata BOT</h3>
    </div>
    <div class="h4h_messages">
    </div>
    <div class="h4h_form">
        <input type="text" placeholder="Escribe al bot" class="h4h_input_text">
        <button type="button" class="h4h_send_button">Enviar</button>
    </div>
</div>
<script>
    var BASE_URL = 'http://159.122.82.189:5000';
    function check_event(eventName) {
        $.ajax({
            url: BASE_URL + '/trigger/' + eventName,
            success: function (response) {
                var query = prompt(response.question);
                $.ajax({
                    url: BASE_URL + '/talk',
                    method: 'POST',
                    data: {
                        'text': query
                    },
                    success: function (res) {
                        window.alert(res.response);
                        $('div.h4h_messages').append($('<div>').addClass('h4h_message_bot').text(res.response))
                    }
                });
            }
        });
    }

    $(document).ready(function () {
        //check_event('location_trigger');
        if ($('input.h4h_input_text').val() === '')
            return false;
        $.ajax({
            url: BASE_URL+'/chatbox',
            success: function (response) {
                $('body').append(response);
                check_event('ela_question_1');
            }
        });
        $('button.h4h_send_button').click(function(){
            $('div.h4h_messages').append($('<div>').addClass('h4h_message_user').text($('input.h4h_input_text').val()))
            $.ajax({
                    url: BASE_URL + '/talk',
                    method: 'POST',
                    data: {
                        'text': $('input.h4h_input_text').val()
                    },
                    success: function (res) {
                        $('div.h4h_messages').append($('<div>').addClass('h4h_message_bot').text(res.response))
                        $('input.h4h_input_text').val('')
                    }
                });
        });
    });
</script>